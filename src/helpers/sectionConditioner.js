const pageInfo = [
  {
    count: 9,
    pages: 1,
    limit: 10,
    nextLink: 'http://localhost:8080/home/?sortBy=address&sortType=ASC&page=2',
    prevLink: null,
  },
];
const results = [
  {
    id: 1,
    name: 'ContohUser',
    jobTitle: 'ContohUser',
    address: null,
    company: 'ContohUser',
    photo: null,
    createdAt: '2020-12-03T01:31:30.000Z',
    updatedAt: '2020-12-03T01:31:30.000Z',
    Company: {
      id: 1,
      name: 'Tuku Bae',
      field: 'Ecommerce',
      city: 'Jakarta',
      photo: null,
      authorId: 1,
      createdAt: '2020-12-03T01:31:31.000Z',
      updatedAt: '2020-12-03T01:31:31.000Z',
    },
  },
  {
    id: 1,
    name: 'ContohUser',
    jobTitle: 'ContohUser',
    address: null,
    company: 'ContohUser',
    photo: null,
    createdAt: '2020-12-03T01:31:30.000Z',
    updatedAt: '2020-12-03T01:31:30.000Z',
    Company: {
      id: 2,
      name: 'Send Bae',
      field: 'Comunication',
      city: 'Jakarta',
      photo: null,
      authorId: 1,
      createdAt: '2020-12-03T01:31:31.000Z',
      updatedAt: '2020-12-03T01:31:31.000Z',
    },
  },
  {
    id: 5,
    name: 'Rodney Leannon Jr.',
    jobTitle: 'Internal Accounts Strategist',
    address: null,
    company: 'Wunsch, Rau and Leannon',
    photo: null,
    createdAt: '2020-12-03T02:32:06.000Z',
    updatedAt: '2020-12-03T02:32:06.000Z',
    Company: {
      id: 3,
      name: 'Wunsch, Rau and Leannon',
      field: null,
      city: null,
      photo: null,
      authorId: 5,
      createdAt: '2020-12-03T02:32:06.000Z',
      updatedAt: '2020-12-03T02:32:06.000Z',
    },
  },
  {
    id: 9,
    name: 'Ahmad amam',
    jobTitle: 'HRD',
    address: null,
    company: 'PT Abadi',
    photo: null,
    createdAt: '2020-12-03T05:51:32.000Z',
    updatedAt: '2020-12-03T05:51:32.000Z',
    Company: {
      id: 5,
      name: 'PT Abadi',
      field: null,
      city: null,
      photo: null,
      authorId: 9,
      createdAt: '2020-12-03T05:51:32.000Z',
      updatedAt: '2020-12-03T05:51:32.000Z',
    },
  },
  {
    id: 11,
    name: 'Budi Sanjaya',
    jobTitle: 'HRD',
    address: null,
    company: 'PT. Budi Sanjaya',
    photo: null,
    createdAt: '2020-12-03T06:45:40.000Z',
    updatedAt: '2020-12-03T10:30:29.000Z',
    Company: {
      id: 6,
      name: 'PT. Budi Sanjaya',
      field: null,
      city: null,
      photo: null,
      authorId: 11,
      createdAt: '2020-12-03T06:45:40.000Z',
      updatedAt: '2020-12-03T06:45:40.000Z',
    },
  },
  {
    id: 13,
    name: 'anya',
    jobTitle: 'HRD',
    address: null,
    company: 'WT. Jaya Production',
    photo: null,
    createdAt: '2020-12-03T07:44:20.000Z',
    updatedAt: '2020-12-03T07:44:20.000Z',
    Company: {
      id: 7,
      name: 'WT. Jaya Production',
      field: null,
      city: null,
      photo: null,
      authorId: 13,
      createdAt: '2020-12-03T07:44:20.000Z',
      updatedAt: '2020-12-03T07:44:20.000Z',
    },
  },
  {
    id: 14,
    name: 'Wahyu Ramadan',
    jobTitle: 'HRD',
    address: null,
    company: 'PT. bagus',
    photo: 'uploads/1606981610517-44333.jpg',
    createdAt: '2020-12-03T07:44:54.000Z',
    updatedAt: '2020-12-03T07:46:52.000Z',
    Company: {
      id: 8,
      name: 'PT. bagus',
      field: null,
      city: null,
      photo: null,
      authorId: 14,
      createdAt: '2020-12-03T07:44:55.000Z',
      updatedAt: '2020-12-03T07:44:55.000Z',
    },
  },
  {
    id: 18,
    name: 'ilham',
    jobTitle: 'HRD',
    address: null,
    company: 'PT. iham sejahtera',
    photo: null,
    createdAt: '2020-12-03T08:28:30.000Z',
    updatedAt: '2020-12-03T08:28:30.000Z',
    Company: {
      id: 10,
      name: 'PT. iham sejahtera',
      field: null,
      city: null,
      photo: null,
      authorId: 18,
      createdAt: '2020-12-03T08:28:30.000Z',
      updatedAt: '2020-12-03T08:28:30.000Z',
    },
  },
  {
    id: 3,
    name: 'M Faris Alkodri',
    jobTitle: 'HRD',
    address: null,
    company: 'PT. eSea Indonesia',
    photo: 'uploads/1606993298037-LOGO-HighRes.png',
    createdAt: '2020-12-03T01:39:22.000Z',
    updatedAt: '2020-12-03T11:01:45.000Z',
    Company: {
      id: 11,
      name: 'PT. eSea Indonesia',
      field: 'Fishery',
      city: 'Tangerang',
      photo: null,
      authorId: 3,
      createdAt: '2020-12-03T01:39:22.000Z',
      updatedAt: '2020-12-03T01:39:22.000Z',
    },
  },
  {
    id: 16,
    name: 'Wahyu Ramadan',
    jobTitle: 'HRD',
    address: 'Tulungagung',
    company: 'PT. Maju Manggu',
    photo: null,
    createdAt: '2020-12-03T08:05:10.000Z',
    updatedAt: '2020-12-03T10:00:57.000Z',
    Company: {
      id: 9,
      name: 'PT. Maju Manggu',
      field: 'Android Developer',
      city: 'Tulungagung',
      photo: null,
      authorId: 16,
      createdAt: '2020-12-03T08:05:10.000Z',
      updatedAt: '2020-12-03T10:00:57.000Z',
    },
  },
];

module.exports = {
  byCity: (searchResult) => {
    let cityArr = searchResult.map((item) => {
      item = item.address;
      return item;
    });
    cityArr = [...new Set(cityArr)];

    searchResult = [...new Set(searchResult)];

    cityArr = cityArr.filter((item) => item);
    cityArr.push(null);
    const resultSearch = [];

    for (const city of cityArr) {
      const item = {title: city ? city : 'All around Indonesia'};
      // const data = {list: []};
      const data = [];
      for (const result of searchResult) {
        if (city === result.address) {
          // data.list.push(result);
          data.push(result);
        }
      }
      Object.assign(item, {data});
      resultSearch.push(item);
    }
    return resultSearch;
  },
  byField: (searchResult) => {
    let fieldArr = searchResult.map((item) => {
      item = item.Company.field;
      return item;
    });
    fieldArr = [...new Set(fieldArr)];

    searchResult = [...new Set(searchResult)];

    console.log(searchResult);

    fieldArr = fieldArr.filter((item) => item);
    fieldArr.push(null);
    const resultSearch = [];

    for (const field of fieldArr) {
      const item = {title: field ? field : 'All Field'};
      // const data = {list: []};
      const data = [];
      for (const result of searchResult) {
        if (field === result.Company.field) {
          // data.list.push(result);
          data.push(result);
        }
      }
      Object.assign(item, {data});
      resultSearch.push(item);
    }
    return resultSearch;
  },
};
